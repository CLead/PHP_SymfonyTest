{% extends 'base.html.twig' %}

{% block title %}Skyways - Location Maintenance{% endblock %}

{% block body %}
<div class="well">
	<h2>Location Maintenance</h2>
	Stock locations are the areas where stock items are stored.  Assigning stock to locations gives you the ability to filter or those locations when completing an inventory.
</div>
<div>
	<table class="table table-striped">
		<thead>
			<tr>
				<td></td>
				<td>Location Name</td>
				<td>Controls</td>
			</tr>
		</thead>
		<tbody>
			<tr class="warning">
				<td>Add New:</td>
				<td><input name="txtNewDescription" class="form-control" /></td>
				<td><a href="#"</td>
			</tr>
		{% for item in items %}
			<tr>
				<td></td>
				<td>
					<input type="textarea" class="form-control CT" col='description' readonly value="{{ item.description}}">
					
				</td>
				<td class="ControlCell">
					<a class="EditButton" ><span class="glyphicon glyphicon-pencil"></span> Edit</a>
					<a class="DelButton" href="{{ path('DeleteLocation', {'ItemID' : item.id} ) }}" onclick="return confirm('Are you sure do you want to delete this file?')"><span class="glyphicon glyphicon-trash"></span> Delete</a>
					<a class="UpdateButton hidden" action='{{ path('locationEditAjax') }}'>Update</a>
					<a class="CancelButton hidden"><span class="glyphicon glyphicon-ban-circle"></span> Cancel</a>
				</td>
				
			</tr>
		{% else %}
			<tr>
				<td colspan="No items to display"></td>
			</tr>
	    {% endfor %}
	   	</tbody>
    </table>
</div>


X

<textarea id="request" cols="20" rows="4"></textarea>

<div id="ClickHere" >Click Me</div>

<script>
		
$(function() {

	$('.EditButton').each(function()
	{
		//$(this).text('Hello');
		//$(this).text($(this).attr('action'));

		//$(this).siblings().toggleClass('hidden');
	});

	$('.EditButton').click(function()
	{
		$(this).siblings().filter('.CancelButton').removeClass('hidden');
		$(this).siblings().filter('.UpdateButton').toggleClass('hidden');
		$(this).siblings().filter('.DelButton').toggleClass('hidden');
		$(this).addClass('hidden');

		$(this).closest('tr').find("td input").each(function() {
			$(this).attr('readonly', false);
		});
            

            //NEED TO CANCEL ALL OTHER EDITS ON OTHER ROWS...

	});
 
	$('.CancelButton').click(function()
	{
		$(this).siblings().filter('.EditButton').removeClass('hidden');
		$(this).siblings().filter('.UpdateButton').toggleClass('hidden');
		$(this).siblings().filter('.DelButton').toggleClass('hidden');
		$(this).addClass('hidden');

				$(this).closest('tr').find("td input").each(function() {
			$(this).attr('readonly', true);
		});
	});


	

		$("#ClickHere").click(function(){


		var data = {request : $('#request').val()};

        $.ajax({
            type: "POST",
            url: "{{ path('locationEditAjax') }}",
            data: data,
            success: function(data, dataType)
            {
                alert(data);
            },

            error: function(XMLHttpRequest, textStatus, errorThrown)
            {
                alert('Error Here : ' + errorThrown);
            }
        });
    });

    });
</script>

{% endblock %}

